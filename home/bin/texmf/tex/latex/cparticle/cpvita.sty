\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cpvita}[2009/11/11 C. Pence CV Template]

\RequirePackage[letterpaper,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in]{geometry}

\RequirePackage{genmpage}
\RequirePackage{needspace}
\RequirePackage{calc}
\RequirePackage{microtype}

% Name and contact information
\newcommand{\name}{My Name}
\newcommand{\address}{My Address\\Address Line 2\\Address Line 3}
\newcommand{\phoneone}{555-555-1212}
\newcommand{\phonetwo}{555-555-1212}
\newcommand{\phonethree}{555-555-1212}
\newcommand{\email}{e@mail.com}
\newcommand{\web}{http://web.com}

\RequirePackage{lastpage}
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\name \quad | \quad {\footnotesize \email}}
\fancyhead[R]{\leftmark}
\fancyfoot[C]{\thepage\ \textsc{/} \pageref{LastPage}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{
\fancyhf{}
\fancyfoot[C]{\thepage\ \textsc{/} \pageref{LastPage}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
}

\RequirePackage[none]{hyphenat}

\RequirePackage{paralist}
\setlength{\plitemsep}{0pt}
\setdefaultleftmargin{1em}{2.2em}{1.87em}{1.7em}{1em}{1em}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% New commands and environments

\newlength{\datewidth}
\setlength{\datewidth}{1.15in}

% This defines how the name looks
\newcommand{\bigname}[1]{\begin{center}\textls[110]{\LARGE\MakeUppercase{#1}}\end{center}}

% A ressection is a main section (<H1>Section</H1>)
\newenvironment{ressection}[1]{
  \needspace{50pt}
  \vspace{20pt}
  \centerline{\Large\textls[80]{\textsc{\MakeLowercase{#1}}}}
  \begin{compactitem}\vspace{6pt}}
{\end{compactitem}}

% A resitem is a simple list element in a ressection (first level)
\newcommand{\resitem}[1]{\item #1\vspace*{2pt}}

% A resdateitem is a simple list element in a ressection with a date
\newcommand{\resdateitem}[2]{\item {\parbox[t]{\linewidth-\datewidth-0.1in}{\raggedright #1}\hfill\parbox[t]{\datewidth}{\hfill\figureversion{tab} #2}}\vspace*{2pt}}

% A ressubitem is a simple list element in anything but a ressection (second level)
\newcommand{\ressubitem}[1]{\item #1\vspace*{2pt}}

% A resdateitem is a simple list element in a ressection with a date
\newcommand{\resdatesubitem}[2]{\item {\parbox[t]{\linewidth-\datewidth-0.2in}{\raggedright #1}\hfill\parbox[t]{\datewidth}{\hfill\figureversion{tab} #2}}\vspace*{2pt}}

% A resbigitem is a complex list element for stuff like jobs and education:
%  Arg 1: Name of company or university
%  Arg 2: Title
%  Arg 3: Dates
\newcommand{\resbigitem}[3]{\item {\parbox[t]{\linewidth-\datewidth-0.2in}{\raggedright \textbf{#1}\\\nopagebreak[4]\textit{#2}}\hfill\parbox[t]{\datewidth}{\hfill\figureversion{tab} #3}}\vspace*{2pt}}

% A resmeditem is a resbigitem without the boldness
\newcommand{\resmeditem}[3]{\item {\parbox[t]{\linewidth-\datewidth-0.2in}{\raggedright #1\\\nopagebreak[4]\textit{#2}}\hfill\parbox[t]{\datewidth}{\hfill\figureversion{tab} #3}}\vspace*{2pt}}

% This is a list that comes with a resbigitem
\newenvironment{ressubsec}[3]{\vspace{6pt} \resbigitem{#1}{#2}{#3} \begin{compactitem}}{\end{compactitem}}

% This is a simple sublist
\newenvironment{reslist}[1]{\resitem{\textbf{#1}} \begin{compactitem}}{\end{compactitem}}


